<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ajax | 我的 Octopress 部落格]]></title>
  <link href="http://yehchge.github.com/blog/categories/ajax/atom.xml" rel="self"/>
  <link href="http://yehchge.github.com/"/>
  <updated>2014-05-16T01:03:24+08:00</updated>
  <id>http://yehchge.github.com/</id>
  <author>
    <name><![CDATA[Yehchge]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ajax Poll 投票範例]]></title>
    <link href="http://yehchge.github.com/blog/2012/04/04/ajax-poll/"/>
    <updated>2012-04-04T23:46:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2012/04/04/ajax-poll</id>
    <content type="html"><![CDATA[<p>這是一個 AJAX Poll 投票的範例</p>

<ol>
<li>HTML Code(ajax_poll.htm):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;html>
</span><span class='line'>  &lt;head>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;meta charset="utf-8" /&gt;
</span><span class='line'>&lt;title&gt;AJAX Poll&lt;/title&gt;
</span><span class='line'>&lt;script src="ajax_poll.js"&gt;&lt;/script&gt; 
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/head>
</span><span class='line'>  &lt;body>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;h3&gt;&lt;a href="http://www.w3schools.com/php/php_ajax_poll.asp"&gt;AJAX Poll&lt;/a&gt;&lt;/h3&gt;
</span><span class='line'>&lt;div id="poll"&gt;
</span><span class='line'>  &lt;h2&gt;Do you like PHP and AJAX so far?&lt;/h2&gt;
</span><span class='line'>  &lt;form&gt;
</span><span class='line'>    Yes: &lt;input type="radio" name="vote" value="0" onclick="getVote(this.value)"&gt;&lt;br /&gt;
</span><span class='line'>    No: &lt;input type="radio" name="vote" value="1" onclick="getVote(this.value)"&gt;
</span><span class='line'>  &lt;/form&gt;
</span><span class='line'>&lt;/div&gt;
</span><span class='line'>&lt;a href="index.htm"&gt;Home&lt;/a&gt;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/body>
</span><span class='line'>&lt;/html></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>Javascript Code(ajax_poll.js):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var xmlHttp;&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function getVote(int) {
</span><span class='line'>  xmlHttp=GetXmlHttpObject();
</span><span class='line'>  if (xmlHttp==null) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>alert("Browser does not support HTTP Request");
</span><span class='line'>return;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  var url="ajax_poll.php";
</span><span class='line'>  url=url+"?vote="+int;
</span><span class='line'>  url=url+"&amp;sid="+Math.random();
</span><span class='line'>  xmlHttp.onreadystatechange=stateChanged;
</span><span class='line'>  xmlHttp.open("GET",url,true);
</span><span class='line'>  xmlHttp.send(null);
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function stateChanged() {
</span><span class='line'>  if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete") {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>document.getElementById("poll").innerHTML=xmlHttp.responseText;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function GetXmlHttpObject() {
</span><span class='line'>  var objXMLHttp=null;
</span><span class='line'>  if (window.XMLHttpRequest) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>objXMLHttp=new XMLHttpRequest();
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  } else if (window.ActiveXObject) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP");
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  return objXMLHttp;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>PHP Code(ajax_poll.php):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>$vote = $_REQUEST['vote'];&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//get content of textfile
</span><span class='line'>$filename = "ajax_poll.txt";
</span><span class='line'>$content = file($filename);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//put content in array
</span><span class='line'>$array = explode("||", $content[0]);
</span><span class='line'>$yes = $array[0];
</span><span class='line'>$no = $array[1];&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>if ($vote == 0) $yes = $yes + 1;
</span><span class='line'>if ($vote == 1) $no = $no + 1;&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//insert votes to txt file
</span><span class='line'>$insertvote = $yes."||".$no;
</span><span class='line'>$fp = fopen($filename,"w");
</span><span class='line'>fputs($fp,$insertvote);
</span><span class='line'>fclose($fp);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>?>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2>Result:&lt;/h2>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;table>
</span><span class='line'>  &lt;tr>
</span><span class='line'>    &lt;td>Yes:&lt;/td>
</span><span class='line'>    &lt;td>
</span><span class='line'>      &lt;img src="images/poll.gif" width='&lt;?php echo(100*round($yes/($no+$yes),2)); ?>' height='20'>
</span><span class='line'>      &lt;?php echo(100*round($yes/($no+$yes),2)); ?>%
</span><span class='line'>    &lt;/td>
</span><span class='line'>  &lt;/tr>
</span><span class='line'>  &lt;tr>
</span><span class='line'>    &lt;td>No:&lt;/td>
</span><span class='line'>    &lt;td>
</span><span class='line'>      &lt;img src="images/poll.gif" width='&lt;?php echo(100*round($no/($no+$yes),2)); ?>' height='20'>
</span><span class='line'>      &lt;?php echo(100*round($no/($no+$yes),2)); ?>%
</span><span class='line'>    &lt;/td>
</span><span class='line'>  &lt;/tr>
</span><span class='line'>&lt;/table>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>TXT Code(ajax_poll.txt):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>0||0</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>下載 poll.gif 檔案, 放到 images 資料夾下.</li>
</ol>


<p><a href="http://1.bp.blogspot.com/-ARnQ1QFOfK4/T3xstL86Z_I/AAAAAAAABNM/HKKFrNnA6eY/s1600/poll.gif" imageanchor="1" style="">
<img border="0" height="200" width="30" src="http://1.bp.blogspot.com/-ARnQ1QFOfK4/T3xstL86Z_I/AAAAAAAABNM/HKKFrNnA6eY/s200/poll.gif" />
</a></p>

<ol>
<li>寫好後, 執行 ajax_poll.htm, 完成!</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ajax Login 登入範例]]></title>
    <link href="http://yehchge.github.com/blog/2012/04/03/ajax-login/"/>
    <updated>2012-04-03T23:26:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2012/04/03/ajax-login</id>
    <content type="html"><![CDATA[<p>這是一個 AJAX Login 登入的範例</p>

<ol>
<li>HTML Code(user_login.htm):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;html>
</span><span class='line'>  &lt;head>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;meta charset="utf-8"/&gt;
</span><span class='line'>&lt;title&gt;AJAX Login&lt;/title&gt;
</span><span class='line'>&lt;script src="user_login.js"&gt;&lt;/script&gt;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/head>
</span><span class='line'>  &lt;body>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;h3&gt;&lt;a href="http://www.aleixcortadellas.com/main/2009/03/01/ajax-post/"&gt;AJAX Login&lt;/a&gt;&lt;/h3&gt;
</span><span class='line'>&lt;form name="myform" id="myform"&gt;
</span><span class='line'>  &lt;div id="msg" style="color:red;display:none;"&gt;&lt;/div&gt;
</span><span class='line'>  Account: &lt;input type="text" name="account"&gt;&lt;br/&gt;
</span><span class='line'>  Password: &lt;input type="password" name="pwd"&gt;&lt;br/&gt;
</span><span class='line'>  &lt;span id="btn"&gt;&lt;input type="button" name="sb" id="sb" value="Login"&gt;&lt;/span&gt;&lt;br/&gt;
</span><span class='line'>  &lt;span style="color:blue;"&gt;(tip: guest / guest)&lt;/span&gt;&lt;br/&gt;
</span><span class='line'>  &lt;a href="index.htm"&gt;Home&lt;/a&gt;
</span><span class='line'>&lt;/form&gt;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/body>
</span><span class='line'>&lt;/html></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>Javascript Code(user_login.js):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>window.onload = initPage;
</span><span class='line'>function initPage() {
</span><span class='line'>  // 取得「送出」按鈕的參考
</span><span class='line'>  var subBtn = document.getElementById("sb");
</span><span class='line'>  // 為按鈕加入事件處理器
</span><span class='line'>  subBtn.onclick = function () {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>MakeRequest(); // 建立請求的函式
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function createRequest() {
</span><span class='line'>  if (window.XMLHttpRequest) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>return new XMLHttpRequest();
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  } else if(window.ActiveXObject) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>return new ActiveXObject("Microsoft.XMLHTTP");
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  } else {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>alert("Your Browser Sucks!\nIt's about time to upgrade don't you think?");
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>var request = createRequest(); // 建立請求物件&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function MakeRequest() {
</span><span class='line'>  form = document.getElementById("myform");
</span><span class='line'>  if (request != null) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>// 取得輸入的文字
</span><span class='line'>var sPost = "";
</span><span class='line'>for(i=0;i&lt;form.elements.length;i++) {
</span><span class='line'>  inp = form.elements[i];
</span><span class='line'>  switch(inp.type) {
</span><span class='line'>    case "text":
</span><span class='line'>    case "textarea":
</span><span class='line'>    case "select-one":
</span><span class='line'>    case "radio":
</span><span class='line'>    case "password":
</span><span class='line'>      if (inp.name &amp;&amp; inp.value) {
</span><span class='line'>        sPost+="&amp;"+escape(inp.name)+"="+escape(inp.value);
</span><span class='line'>      }
</span><span class='line'>      break;
</span><span class='line'>    default:
</span><span class='line'>      break;
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>var url = "user_login.php?1=1";
</span><span class='line'>
</span><span class='line'>// 利用 POST 方法、請求目的地 url、true 為非同步
</span><span class='line'>request.open("POST", url, true);
</span><span class='line'>
</span><span class='line'>// 回應處理函式 displayResult
</span><span class='line'>request.onreadystatechange = displayResult;
</span><span class='line'>request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
</span><span class='line'>request.send(sPost); // 送出請求
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function displayResult() {
</span><span class='line'>  if (request.readyState == 4) { // 確認 readState&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>if (request.status == 200) { // 確認 status
</span><span class='line'>  var disp = document.getElementById("msg"); // 取得顯示位置
</span><span class='line'>  disp.innerHTML = request.responseText;
</span><span class='line'>  if (request.responseText=="Succcess") {
</span><span class='line'>    var btnInput = document.getElementById("btn"); // 取得按鈕位置
</span><span class='line'>    btnInput.style.display="none";
</span><span class='line'>  }
</span><span class='line'>  disp.style.display="block";
</span><span class='line'>}
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>PHP Code(user_login.php):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>$aRow =&amp;$_POST;
</span><span class='line'>$aStr = array();&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>if (!isset($aRow['account'])) $aRow['account']="";
</span><span class='line'>if (!isset($aRow['pwd'])) $aRow['pwd']="";&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>if (!$aRow['account']) $aStr[] = "Enter account";
</span><span class='line'>if (!$aRow['pwd']) $aStr[] = "Enter password";&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>if (!count($aStr)) {
</span><span class='line'>  if ($aRow['account']=="guest" and $aRow['pwd']=="guest") {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>$aStr[] = "Succcess";
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  } else {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>$aStr[] = "Account and password is not correct";
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}
</span><span class='line'>echo implode("&lt;br>",$aStr);&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>?></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>寫好後, 執行 user_login.htm , 完成!</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ajax Suggest 建議的範例]]></title>
    <link href="http://yehchge.github.com/blog/2012/04/03/ajax-suggest-1/"/>
    <updated>2012-04-03T01:01:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2012/04/03/ajax-suggest-1</id>
    <content type="html"><![CDATA[<p>Ajax Suggest 建議的範例:</p>

<ol>
<li>HTML Code(clienthint.htm):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;html>
</span><span class='line'>  &lt;head>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;script src="clienthint.js"&gt;&lt;/script&gt;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/head>
</span><span class='line'>  &lt;body>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>&lt;h3&gt;&lt;a href="http://www.w3school.com.cn/php/php_ajax_suggest.asp"&gt;Ajax Suggest&lt;/a&gt;&lt;/h3&gt;
</span><span class='line'>&lt;form&gt;
</span><span class='line'>  First Name: &lt;input type="text" id="txt1" onkeyup="showHint(this.value)"&gt;
</span><span class='line'>&lt;/form&gt;
</span><span class='line'>&lt;p&gt;Suggestions: &lt;span id="txtHint" /&gt;&lt;/p&gt;
</span><span class='line'>&lt;a href="index.htm"&gt;Home&lt;/a&gt;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  &lt;/body>
</span><span class='line'>&lt;/html></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>Javascript Code(clienthint.js):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var xmlHttp;
</span><span class='line'>function showHint(str) {
</span><span class='line'>  if (str.length==0) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>document.getElementById("txtHint").innerHTML="";
</span><span class='line'>return;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  xmlHttp=GetXmlHttpObject()
</span><span class='line'>  if (xmlHttp==null) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>alert ("Browser does not support HTTP Request");
</span><span class='line'>return;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  var url="clienthint.php";
</span><span class='line'>  url=url+"?q="+str;
</span><span class='line'>  url=url+"&amp;sid="+Math.random();
</span><span class='line'>  xmlHttp.onreadystatechange=stateChanged;
</span><span class='line'>  xmlHttp.open("GET",url,true);
</span><span class='line'>  xmlHttp.send(null);
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function stateChanged() {
</span><span class='line'>  if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete") {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>document.getElementById("txtHint").innerHTML=xmlHttp.responseText
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>function GetXmlHttpObject() {
</span><span class='line'>  var xmlHttp=null;
</span><span class='line'>  try {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>// Firefox, Opera 8.0+, Safari
</span><span class='line'>xmlHttp=new XMLHttpRequest();
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  } catch (e) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>// Internet Explorer
</span><span class='line'>try {
</span><span class='line'>  xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
</span><span class='line'>} catch (e) {
</span><span class='line'>  xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
</span><span class='line'>}
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>  return xmlHttp;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>PHP Code(clienthint.php):</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?php&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>// Fill up array with names
</span><span class='line'>$a[]="Anna";
</span><span class='line'>$a[]="Brittany";
</span><span class='line'>$a[]="Cinderella";
</span><span class='line'>$a[]="Diana";
</span><span class='line'>$a[]="Eva";
</span><span class='line'>$a[]="Eric";
</span><span class='line'>$a[]="Fiona";
</span><span class='line'>$a[]="Gunda";
</span><span class='line'>$a[]="Hege";
</span><span class='line'>$a[]="Inga";
</span><span class='line'>$a[]="Johanna";
</span><span class='line'>$a[]="Kitty";
</span><span class='line'>$a[]="Linda";
</span><span class='line'>$a[]="Nina";
</span><span class='line'>$a[]="Ophelia";
</span><span class='line'>$a[]="Petunia";
</span><span class='line'>$a[]="Amanda";
</span><span class='line'>$a[]="Raquel";
</span><span class='line'>$a[]="Cindy";
</span><span class='line'>$a[]="Doris";
</span><span class='line'>$a[]="Eve";
</span><span class='line'>$a[]="Evita";
</span><span class='line'>$a[]="Sunniva";
</span><span class='line'>$a[]="Tove";
</span><span class='line'>$a[]="Unni";
</span><span class='line'>$a[]="Violet";
</span><span class='line'>$a[]="Liza";
</span><span class='line'>$a[]="Elizabeth";
</span><span class='line'>$a[]="Ellen";
</span><span class='line'>$a[]="Wenche";
</span><span class='line'>$a[]="Vicky";&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//get the q parameter from URL
</span><span class='line'>$q=$_GET["q"];&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//lookup all hints from array if length of q>0
</span><span class='line'>if (strlen($q) > 0) {
</span><span class='line'>  $hint="";
</span><span class='line'>  for($i=0; $i&lt;count($a); $i++) {&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q)))) {
</span><span class='line'>  if ($hint=="") {
</span><span class='line'>    $hint=$a[$i];
</span><span class='line'>  } else {
</span><span class='line'>    $hint=$hint." , ".$a[$i];
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>  }
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//Set output to "no suggestion" if no hint were found
</span><span class='line'>//or to the correct values
</span><span class='line'>if ($hint == "") {
</span><span class='line'>  $response="no suggestion";
</span><span class='line'>} else {
</span><span class='line'>  $response=$hint;
</span><span class='line'>}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>//output the response
</span><span class='line'>echo $response;
</span><span class='line'>?></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>寫好後, 執行 clienthint.htm , 完成!</li>
</ol>

]]></content>
  </entry>
  
</feed>
