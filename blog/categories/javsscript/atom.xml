<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: JavsScript | 我的 Octopress 部落格]]></title>
  <link href="http://yehchge.github.com/blog/categories/javsscript/atom.xml" rel="self"/>
  <link href="http://yehchge.github.com/"/>
  <updated>2014-05-16T00:52:22+08:00</updated>
  <id>http://yehchge.github.com/</id>
  <author>
    <name><![CDATA[Yehchge]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Javascript 淺析註冊事件]]></title>
    <link href="http://yehchge.github.com/blog/2012/08/23/javascript/"/>
    <updated>2012-08-23T15:10:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2012/08/23/javascript</id>
    <content type="html"><![CDATA[<p>原文：http://www.wowbox.com.tw/blog/article.asp?id=3004
首先是最常規的方法：
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!" onclick="test()" >test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>當某一天，我們知道JavaScript要跟HTML結構實現分離後，就會改了一種寫法：
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!">test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>window.onload = function(){
</span><span class='line'>    document.getElementById("para").onclick = test;
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>當我們工作越來越久後，有時候我們需要對某個元素綁定多個相同的事件類型：
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!">test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function pig(){
</span><span class='line'>  alert("pig");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>window.onload = function(){
</span><span class='line'>     document.getElementById("para").onclick = test;
</span><span class='line'>     document.getElementById("para").onclick = pig;
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>如果按照上面的寫法，我們只能輸出第二個函數。
這時候我們需要用到attachEvent方法：
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!">test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function pig(){
</span><span class='line'>  alert("pig");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>window.onload = function(){
</span><span class='line'>     document.getElementById("para").attachEvent("onclick",test);
</span><span class='line'>     document.getElementById("para").attachEvent("onclick",pig);
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>在一段時間內，你並沒發現這段代碼有任何錯誤。
某一天，一個名叫firefox的瀏覽器 闖入你的視野，當我們把這段代碼放到firefox中執行後，
發現並不能正常運行。 問題就這樣，越來越多，然而作為一名JS程式設計師，這些都是必須面對的。</p>

<p>為了解決這段代碼的平台兼容性問題，我翻翻手冊，知道了firefox跟ie的區別：
firefox中註冊事件使用：addEventListener方法，同時為了兼容ie，我們必須用到if ... else...
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!">test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function pig(){
</span><span class='line'>  alert("pig");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>window.onload = function(){
</span><span class='line'>         var element =  document.getElementById("para");
</span><span class='line'>         if(element.addEventListener){  // firefox  , w3c
</span><span class='line'>                element.addEventListener("click",test,false);
</span><span class='line'>    element.addEventListener("click",pig,false);
</span><span class='line'>         } else {   // ie 
</span><span class='line'>    element.attachEvent("onclick",test);
</span><span class='line'>    element.attachEvent("onclick",pig);
</span><span class='line'>         }
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>此時，代碼就可以在多個平台上工作了。
但隨著水平的進步，你不滿足每次都去判斷，你想把這個判斷封裝起來，以後可以直接調用：
程式碼:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p id="para" title="cssrain demo!">test&lt;/p>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;script>
</span><span class='line'>function test(){
</span><span class='line'>  alert("test");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function pig(){
</span><span class='line'>  alert("pig");
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>function addListener(element,e,fn){
</span><span class='line'>     if(element.addEventListener){
</span><span class='line'>          element.addEventListener(e,fn,false);
</span><span class='line'>     } else {
</span><span class='line'>          element.attachEvent("on" + e,fn);
</span><span class='line'>     }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>window.onload = function(){
</span><span class='line'>         var element =  document.getElementById("para");
</span><span class='line'>         addListener(element,"click",test);
</span><span class='line'>         addListener(element,"click",pig);
</span><span class='line'>}
</span><span class='line'>&lt;/script>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>至此，作為一個程式設計師的工作就完了。
中間我們從一個最傳統，最基本的寫法，然後實現Js和HTML的分離，然後又實現對同一個元素註冊多個事件，期間，
我們發現註冊事件的兼容性問題。最後我們對註冊事件的方法進行封裝，方便以後使用。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JavaScript setTimeout 語法範例]]></title>
    <link href="http://yehchge.github.com/blog/2010/01/08/javascript-settimeout/"/>
    <updated>2010-01-08T16:08:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2010/01/08/javascript-settimeout</id>
    <content type="html"><![CDATA[<div class='post'>
以下為 JavaScript 語法的範例, 因為撰寫程式時, 卡在setTimeout的地方很久, 所以特地備註 !<br />需注意的地方:<br /><br />1.  這個是使用setTimeout 的方式撰寫, 之前錯的想法是以為, setTimeout 執行之後, 會一直的執行下去,<br />    結果不是, setTimeout 應該是只有執行一次, 如果要重新執行, 就需向以下的方式撰寫, 才可以再次執行!<br />2. setTimeout設定中, 裡面要執行的函式, 必須用 "" 引號括弧起來!<br />3. 如果 setTimeout裡面有參數, 如果是字串, 最好用 '' 單引號括弧起來!<br /><br />&lt;html&gt;<br />&lt;head&gt;<br />&lt;/head&gt;<br />&lt;body&gt;&lt;form&gt;<br />&lt;div id="txt"&gt; &lt;/div&gt;<br />&lt;input type="button" id="btn1" value="Start count!" onClick="timedCount(i)" style="display:"&gt;<br />&lt;input type="button" id="btn2" value="Stop count!" onClick="stopCount()"&gt;<br />&lt;/form&gt;&lt;/body&gt;<br />&lt;script type="text/javascript"&gt;<br />var i=0;<br />var t;<br />function timedCount(i) {<br />   document.getElementById("btn1").disabled=true<br />   var txt=document.getElementById("txt");<br />   txt.innerHTML=i;<br />   i++;<br />   t=<span style="color: rgb(255, 0, 0);">setTimeout("timedCount("+i+")",1000);</span><br />}<br />function stopCount() {<br />   document.getElementById("btn1").disabled=false<br />   clearTimeout(t);<br />}<br />&lt;/script&gt;<br />&lt;/html&gt;</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JavaScript Checkbox 全選與全不選的範例(方便)]]></title>
    <link href="http://yehchge.github.com/blog/2010/01/08/javascript-checkbox/"/>
    <updated>2010-01-08T15:56:00+08:00</updated>
    <id>http://yehchge.github.com/blog/2010/01/08/javascript-checkbox</id>
    <content type="html"><![CDATA[<div class='post'>
&lt;SCRIPT LANGUAGE="JavaScript"&gt;<br />&lt;!--<br />// 更改表單中的選取狀態<br />// stype   : 要改變的值, "Y":全部選取 "N":全部取消 "A":反向選取<br />function SelectAll( stype ) {<br />   for (var i=0;i&lt;document.forms[0].elements.length;i++){<br />      var e=document.forms[0].elements[i];<br />      switch ( stype ) {          <br />          case 'Y':   e.checked=true;         break;<br />          case 'N':   e.checked=false;      break;<br />          case 'A':   e.checked=!e.checked;   break;<br />          default :   e.checked=!e.checked;   break;<br />      }<br />   }<br />}<br />--&gt;<br />&lt;/SCRIPT&gt;<br />=====================================================================<br />使用方式:<br />&lt;input type=button value="反向選取" onclick="SelectAll('A')"&gt;<br />&lt;input type=button value="全部選取" onclick="SelectAll('Y')"&gt;<br />&lt;input type=button value="全部取消" onclick="SelectAll('N')"&gt; <br /><br />此引用於: http://dob.tnc.edu.tw/themes/old/showPage.php?s=2901&t=6</div>

]]></content>
  </entry>
  
</feed>
